const yearSelect=document.getElementById("year"),monthSelect=document.getElementById("month"),daySelect=document.getElementById("day"),months=["January","February","March","April","May","June","July","August","September","October","November","December"];let previousDay;function populateDays(e){for(;daySelect.firstChild;)daySelect.removeChild(daySelect.firstChild);let t,a=yearSelect.value;t="January"===e||"March"===e||"May"===e||"July"===e||"August"===e||"October"===e||"December"===e?31:"April"===e||"June"===e||"September"===e||"November"===e?30:1===new Date(a,1,29).getMonth()?29:28;for(let e=1;e<=t;e++){const t=document.createElement("option");t.textContent=e,daySelect.appendChild(t)}previousDay&&(daySelect.value=previousDay,""===daySelect.value&&(daySelect.value=previousDay-1),""===daySelect.value&&(daySelect.value=previousDay-2),""===daySelect.value&&(daySelect.value=previousDay-3))}function populateYears(){let e=(new Date).getFullYear();for(let t=0;t<101;t++){const a=document.createElement("option");a.textContent=e-t,yearSelect.appendChild(a)}}!function(){for(let e=0;e<months.length;e++){const t=document.createElement("option");t.textContent=months[e],monthSelect.appendChild(t)}monthSelect.value="January"}(),populateDays(monthSelect.value),populateYears(),yearSelect.onchange=function(){populateDays(monthSelect.value)},monthSelect.onchange=function(){populateDays(monthSelect.value)},daySelect.onchange=function(){previousDay=daySelect.value};
const submitButton=document.getElementById("submit"),formContainer=document.getElementById("main-form"),form=document.getElementById("registration-form"),errors={isFirstNameError:!0,isLastNameError:!0,isEmailError:!0,isPasswordError:!0,isPassConfirmError:!0},validateField=(e,t,s)=>{e.addEventListener("input",r=>{if(!t(r.target.value))return errors[s]=!0,void e.closest(".form-field").setAttribute("aria-invalid","true");errors[s]=!1,e.closest(".form-field").setAttribute("aria-invalid","false")}),e.addEventListener("focus",t=>{e.closest(".form-field").setAttribute("aria-invalid","false")})},firstName=document.getElementById("first-name");validateField(firstName,e=>!!e,"isFirstNameError");const lastName=document.getElementById("last-name");validateField(lastName,e=>!!e,"isLastNameError");const email=document.getElementById("email"),validateEmail=e=>e.toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);validateField(email,validateEmail,"isEmailError");const password=document.getElementById("password"),validatePassword=e=>{let t=!0;const s=document.getElementById("pass-length"),r=document.getElementById("pass-up"),a=document.getElementById("pass-low"),i=document.getElementById("pass-num");return e.length>7?s.classList.add("correct"):(s.classList.remove("correct"),t=!1),/[A-Z]/.test(e)?r.classList.add("correct"):(r.classList.remove("correct"),t=!1),/[a-z]/.test(e)?a.classList.add("correct"):(a.classList.remove("correct"),t=!1),/[0-9]/.test(e)?i.classList.add("correct"):(i.classList.remove("correct"),t=!1),t};validateField(password,validatePassword,"isPasswordError");const passConfirm=document.getElementById("confirm-password"),validatePassConfirm=()=>passConfirm.value===password.value;validateField(passConfirm,validatePassConfirm,"isPassConfirmError"),password.addEventListener("input",()=>{passConfirm.closest(".form-field").setAttribute("aria-invalid",validatePassConfirm()?"false":"true")}),submitButton.addEventListener("click",e=>{if(e.preventDefault(),Object.values(errors).includes(!0))return submitButton.classList.add("shake"),void setTimeout(()=>submitButton.classList.remove("shake"),600);const t=new FormData(form);var s={};t.forEach(function(e,t){s[t]=e}),console.log(s),formContainer.innerHTML="";const r=document.getElementById("done-template").content.cloneNode(!0);formContainer.appendChild(r)});